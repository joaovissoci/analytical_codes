---
title: "SAP Report - Faculty"
output: 
  flexdashboard::flex_dashboard:
  orientation: rows
  theme: journal
  social: menu
  source_code: https://git.io/vaZdx
  runtime: shiny
---
    
```{r setup, include=FALSE}
library(flexdashboard)
library(dplyr)
library(lubridate)
library(dygraphs)
library(xts)
library(tidyverse)
library(plotly)

#to run and generate the dashboard
#rmarkdown::run("/Users/Joao/Desktop/deleteme.Rmd")

# Access to CRAN packages data stream
# source("/Users/Joao/Desktop/package_stream.R")

#original data
# data_01<-read.csv("/Users/joaovissoci/Box Sync/Home Folder jnv4/Data/DGNN/sap_neuro/US_sap_data_v2.csv",sep=",")

data_01<-structure(list(X...recoder_date = structure(c(54L, 55L, 56L, 
57L, 58L, 59L, 60L, 61L, 79L, 63L, 64L, 65L, 66L, 67L, 68L, 69L, 
69L, 70L, 71L, 72L, 73L, 74L, 75L, 76L, 77L, 42L, 43L, 44L, 45L, 
46L, 47L, 48L, 50L, 51L, 52L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 
9L, 10L, 11L, 12L, 13L, 13L, 14L, 15L, 16L, 18L, 19L, 20L, 21L, 
22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L, 33L, 34L, 
35L, 36L, 37L, 38L, 39L, 41L, 80L, 88L, 89L, 90L, 91L, 92L, 93L, 
81L, 82L, 83L, 84L, 85L, 86L, 87L, 94L, 95L, 99L, 96L, 97L, 98L, 
114L, 100L, 102L, 103L, 104L, 105L, 106L, 107L, 108L, 109L, 110L, 
53L, 111L, 112L, 113L, 137L, 138L, 146L, 147L, 148L, 115L, 116L, 
117L, 118L, 119L, 120L, 121L, 122L, 123L, 124L, 125L, 126L, 127L, 
128L, 129L, 130L, 131L, 132L, 133L, 134L, 135L, 136L, 139L, 140L, 
141L, 141L, 142L, 142L, 143L, 144L, 62L, 149L, 150L, 168L, 169L, 
170L, 171L, 172L, 173L, 174L, 175L, 177L, 78L, 154L, 155L, 156L, 
157L, 158L, 161L, 162L, 163L, 163L, 164L, 165L, 166L, 166L, 167L, 
200L, 201L, 202L, 203L, 204L, 205L, 206L, 207L, 208L, 209L, 210L, 
210L, 211L, 49L, 178L, 179L, 180L, 181L, 182L, 183L, 184L, 17L, 
185L, 186L, 187L, 188L, 189L, 190L, 191L, 192L, 193L, 194L, 195L, 
196L, 40L, 197L, 198L, 199L, 212L, 213L, 214L, 101L, 145L, 176L, 
151L, 152L, 153L, 159L, 160L), .Label = c("1/10/17 04:55", "1/10/17 04:57", 
"1/10/17 12:15", "1/11/17 06:23", "1/11/17 06:25", "1/11/17 09:52", 
"1/11/17 15:46", "1/11/17 16:08", "1/11/17 17:09", "1/12/17 04:36", 
"1/12/17 06:19", "1/12/17 06:20", "1/12/17 06:21", "1/12/17 08:55", 
"1/12/17 08:58", "1/12/17 13:32", "1/12/17 13:34", "1/12/17 16:01", 
"1/12/17 16:02", "1/13/17 05:48", "1/13/17 07:53", "1/13/17 08:56", 
"1/13/17 09:00", "1/13/17 13:45", "1/18/17 03:55", "1/18/17 03:57", 
"1/18/17 04:01", "1/18/17 11:14", "1/18/17 16:07", "1/19/17 05:26", 
"1/19/17 18:32", "1/22/17 18:56", "1/24/17 16:52", "1/24/17 16:53", 
"1/25/17 14:52", "1/25/17 17:07", "1/25/17 17:10", "1/25/17 18:38", 
"1/26/17 08:27", "1/26/17 08:38", "1/26/17 20:28", "1/4/17 07:19", 
"1/4/17 17:41", "1/4/17 19:06", "1/4/17 20:39", "1/8/17 09:08", 
"1/9/17 07:23", "1/9/17 07:27", "1/9/17 10:52", "1/9/17 11:03", 
"1/9/17 18:40", "1/9/17 18:41", "10/28/16 12:48", "11/21/16 05:31", 
"11/22/16 06:54", "11/23/16 09:08", "11/23/16 15:33", "11/29/16 21:37", 
"11/30/16 11:58", "12/1/16 02:19", "12/1/16 02:22", "12/1/16 05:52", 
"12/14/16 20:42", "12/14/16 20:55", "12/15/16 18:41", "12/15/16 18:43", 
"12/20/16 18:57", "12/20/16 19:01", "12/20/16 19:03", "12/22/16 02:28", 
"12/22/16 09:17", "12/29/16 07:54", "12/29/16 07:55", "12/29/16 07:56", 
"12/29/16 07:57", "12/29/16 07:58", "12/29/16 07:59", "12/8/16 21:17", 
"12/8/16 21:22", "2/1/17 18:30", "2/15/17 08:33", "2/16/17 11:55", 
"2/16/17 11:56", "2/16/17 11:58", "2/16/17 11:59", "2/19/17 06:39", 
"2/19/17 06:40", "2/2/17 10:45", "2/2/17 10:49", "2/2/17 13:43", 
"2/7/17 16:02", "2/7/17 16:03", "2/8/17 20:17", "3/1/17 10:02", 
"3/1/17 18:09", "3/11/17 10:50", "3/15/17 20:24", "3/15/17 20:50", 
"3/8/17 19:46", "4/14/17 06:11", "4/14/17 06:13", "4/20/17 02:23", 
"4/20/17 02:24", "4/20/17 02:25", "4/20/17 02:27", "4/20/17 20:10", 
"4/21/17 04:00", "4/26/17 06:11", "4/26/17 14:56", "4/26/17 14:58", 
"4/28/17 20:29", "4/29/17 10:10", "4/29/17 13:38", "4/6/17 19:00", 
"5/11/17 04:25", "5/11/17 04:28", "5/12/17 08:57", "5/14/17 20:40", 
"5/15/17 07:13", "5/16/17 09:20", "5/16/17 09:39", "5/18/17 07:59", 
"5/18/17 08:17", "5/18/17 08:19", "5/18/17 08:21", "5/18/17 12:50", 
"5/19/17 15:20", "5/20/17 12:41", "5/20/17 14:24", "5/22/17 15:32", 
"5/22/17 15:35", "5/24/17 23:29", "5/24/17 23:31", "5/26/17 16:04", 
"5/27/17 06:25", "5/27/17 07:25", "5/3/17 16:03", "5/3/17 19:18", 
"5/30/17 09:10", "5/30/17 12:23", "5/30/17 12:25", "5/30/17 12:26", 
"5/30/17 12:27", "5/31/17 11:04", "5/4/17 15:59", "5/8/17 12:07", 
"5/8/17 12:14", "5/9/17 08:06", "6/1/17 16:34", "6/1/17 16:37", 
"6/10/17 07:29", "6/19/17 13:54", "6/20/17 11:51", "6/20/17 12:23", 
"6/20/17 21:06", "6/21/17 09:48", "6/21/17 11:15", "6/21/17 13:40", 
"6/22/17 20:46", "6/23/17 16:04", "6/24/17 23:32", "6/28/17 13:24", 
"6/29/17 00:34", "6/29/17 01:16", "6/29/17 01:17", "6/29/17 01:38", 
"6/29/17 01:40", "6/6/17 04:25", "6/7/17 10:12", "6/7/17 10:31", 
"6/7/17 10:46", "6/7/17 10:48", "6/7/17 10:54", "6/7/17 14:10", 
"6/7/17 14:31", "6/7/17 18:41", "6/8/17 17:52", "7/11/17 07:31", 
"7/11/17 08:46", "7/11/17 12:41", "7/11/17 14:05", "7/11/17 15:08", 
"7/12/17 09:34", "7/12/17 14:29", "7/13/17 08:43", "7/13/17 14:15", 
"7/13/17 20:16", "7/13/17 21:30", "7/14/17 11:16", "7/17/17 15:28", 
"7/18/17 19:37", "7/19/17 06:44", "7/19/17 09:52", "7/19/17 14:30", 
"7/20/17 05:30", "7/21/17 13:31", "7/28/17 05:02", "7/28/17 15:00", 
"7/28/17 15:01", "7/5/17 05:07", "7/5/17 11:07", "7/5/17 11:30", 
"7/5/17 21:07", "7/5/17 21:13", "7/6/17 09:20", "7/6/17 13:29", 
"7/6/17 17:06", "7/7/17 13:31", "7/7/17 13:33", "7/8/17 06:26", 
"7/8/17 07:11", "8/1/17 06:41", "8/1/17 06:43", "9/18/17 06:11"
), class = "factor"), record_duration = c(42L, 99L, 176L, 224L, 
280L, 53L, 138L, 133L, 284858L, 785L, 670L, 91L, 128L, 243L, 
30L, 17L, 181L, 115L, 170L, 63L, 34L, 35L, 74L, 29L, 52L, 27L, 
128L, 293L, 106L, 91L, 225L, 85L, 144L, 74L, 191L, 97L, 118L, 
146L, 125L, 859L, 163L, 38L, 70L, 80L, 168L, 67L, 37L, 26L, 57L, 
178L, 89L, 434L, 55L, 59L, 91L, 117L, 198L, 207L, 174L, 81L, 
67L, 109L, 95L, 59L, 135L, 46L, 48L, 74L, 16L, 70L, 147L, 200L, 
415L, 283L, 445L, 200L, 214L, 14L, 41L, 38L, 40L, 393L, 122L, 
46L, 81L, 44L, 60L, 28L, 25L, 48L, 66L, 62L, 106L, 215L, 69L, 
151L, 116L, 48L, 46L, 79L, 116L, 209L, 129L, 104L, 71L, 95L, 
285L, 89L, 83L, 70L, 127L, 62L, 116L, 576L, 199L, 107L, 48L, 
225L, 115L, 112L, 1092L, 16L, 97L, 109L, 49L, 52L, 96L, 212L, 
159L, 55L, 63L, 41L, 59L, 57L, 23L, 142L, 87L, 103L, 98L, 19L, 
18L, 13L, 11L, 10L, 68L, 19L, 106L, 33L, 50L, 52L, 116L, 79L, 
45L, 1557L, 15L, 258L, 141L, 1383L, 262L, 110L, 88L, 72L, 69L, 
26L, 103L, 28L, 15L, 15L, 12L, 19L, 14L, 47L, 58L, 171L, 94L, 
190L, 88L, 85L, 212L, 63L, 87L, 38L, 38L, 185L, 70L, 7L, 89L, 
34L, 148L, 39L, 33L, 43L, 102L, 19L, 12L, 80L, 50L, 163L, 345L, 
89L, 111L, 105L, 90L, 59L, 94L, 160L, 477L, 87L, 68L, 30L, 108L, 
45L, 34L, 8L, 222L, 3L, 6L, 91L, 2384L, 56455L, 9L), q2_feedback_during_operation = structure(c(112L, 
138L, 127L, 23L, 1L, 128L, 130L, 141L, 88L, 113L, 68L, 21L, 5L, 
1L, 1L, 1L, 1L, 9L, 122L, 1L, 1L, 1L, 1L, 1L, 1L, 13L, 99L, 57L, 
96L, 105L, 108L, 101L, 87L, 1L, 1L, 92L, 91L, 1L, 51L, 102L, 
81L, 1L, 1L, 35L, 62L, 61L, 137L, 136L, 63L, 118L, 8L, 125L, 
134L, 131L, 1L, 143L, 6L, 25L, 82L, 1L, 1L, 1L, 55L, 15L, 124L, 
16L, 2L, 1L, 1L, 1L, 77L, 41L, 20L, 120L, 103L, 12L, 1L, 1L, 
42L, 134L, 134L, 79L, 49L, 34L, 83L, 93L, 59L, 36L, 17L, 94L, 
30L, 53L, 43L, 123L, 45L, 28L, 14L, 142L, 144L, 32L, 145L, 76L, 
27L, 111L, 75L, 69L, 1L, 33L, 22L, 38L, 4L, 11L, 31L, 70L, 140L, 
10L, 19L, 73L, 78L, 72L, 1L, 1L, 24L, 26L, 114L, 95L, 64L, 67L, 
48L, 18L, 50L, 46L, 84L, 97L, 1L, 1L, 1L, 66L, 85L, 1L, 1L, 1L, 
1L, 1L, 52L, 1L, 1L, 1L, 65L, 47L, 54L, 89L, 90L, 39L, 47L, 119L, 
3L, 1L, 110L, 117L, 60L, 139L, 80L, 1L, 40L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 74L, 115L, 98L, 37L, 135L, 71L, 126L, 1L, 1L, 
1L, 86L, 100L, 1L, 133L, 1L, 106L, 56L, 132L, 146L, 116L, 1L, 
1L, 107L, 133L, 109L, 121L, 44L, 129L, 58L, 29L, 7L, 1L, 104L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("", 
" Did a great job. On your subsequent cases try to think about alternatives for approach  ", 
" Even though it's a small resection of the nice job with the CUSA good touch and working with the intraop imaging in the resection side this was not an easy case from that standpoint which he really wants the dick on how we Take down adhesions ", 
" Excellent job on the opening you're very careful and even though it was scarred in and he did a nice job good job on the drilling I think you're picking up the technique just need to work on getting your hand orientation so you can see through the scope but you're very careful and safe and that's what's most important and also drilling more off with the cutting board when you're preparing and plates will be really important so overall made great progress today just into cases ", 
" He did a nice job with the drilling just need to push the drill bit further into the vertebral body to get that osteophyte off otherwise it's just a matter now putting it all together you have all the pieces it a really nice job very nice soft touch with the drill no risk of plunging nice work ", 
" He did a very nice job and exposure that was excellent I think you have this down well and I started to see some of the minor different routes to get to the answer cervical spine continue to make sure you use the sternal notch to get your guide to the midline see make sure you're on the midline. As far as zone two I think you did a very nice job in a very difficult case You need to work on the drilling and preparing the endplate but I you progressed quite well even between the first and the third level so over all that you're doing really well. Keep being your usual engaged self makes it fun and enjoyable to teach you ", 
" He did really well we just need to get to the next step where you can talk through it rather me talking to you otherwise you're ready to get to passive help on the next case I hope ", 
" I think you have a really nice technique Kim and I think that he really can do one of these by yourself without any difficulty. I think working on getting the drill up and Dadee and play more when you do your first pass with the drill and then  using that technique of adjusting the scope just the few degrees to get a better look so your hand is in the way of the scope when you're trying to take off the PLL  would make your technique even better. I think he did a really nice job and patient job teaching Jackie and I'm very proud of how you handle the junior resident in the OR so great job ", 
" Nice job being patient and just looking carefully for the Vegas nerve and not falling for any superficial nerve that could be the ansa you did a nice job wrapping the electrodes around everything else is great fine most important you're very careful with the exposure nice work", 
" Nice job drilling taking a bone off you didn't get a dural tear which is great and really good job for first time doing the sewing of dura under the microscope very good you just need to get your hand little more angle to get the right angle with a needle to get easy passes and then it's pushing down just a little bit if you go through the Dural side ", 
" Nice job on the drilling the endplates and also just going to take some time under the microscope learn how to drill the bone spurs off but great start and your opening was excellent just make sure on the right angles for the strap muscles in the sternocleidomastoid muscle ", 
" Nice job on the opening although already done for us very good job with the Kusse A. you have nice touch to take it off the pial I am sorry we didn't have a little extra time to work on it but I trust you doing subpial  dissections which is a big deal for a junior resident so nice work ", 
" Nice skin closure very careful handling the edges us from getting infection ", 
" On the first Z PD you were almost to no help but we should do a couple more openings together and you should think about what trouble you can get into like the Extertal jugular vein. On zone two you did a really good job even though the displaces were collapsed I think you're ready to do that on your own and talk me through it and you did a nice job getting the disc out but you need to go a little deeper. You obviously know how to put in the hardware but will work more on that ", 
" Really nice job in all facets he did the whole thing from start to finish very proud of how you handle it and get it professionally strong work    Most importantly the patients doing great ", 
" Really tough case removing the play he did a nice job dissecting the esophagus from the plate which was hard more difficult this but do you do when one screw won't come out and he did a good job handling that the rest of Kasie did an excellent fashion especially drilling off the osteophytes and getting the dog bones done and the decompression overall awesome job ", 
" Still a little trouble with defining the tumor plane but this was a complex case. ", 
" This is a really difficult case because of the bone falling apart on us we had to use the extra long screws which turned out great it's just one of those cases where it's so difficult you did a nice job with the drilling in a nice job trying to get the plate on which was really difficult ", 
" Tough case since the neck was so deep but you did a nice job with a little bit a help good job getting the discount almost completely independent on that and the drilling is much better and you seem to be a little more aggressive on the initial preparation so the diamond drill is not so hard ", 
" Very nice job on the whole surgery nice job teaching Alexa I believe that working on how to get medial access for the strips is something to work on for the next case careful dissection of the adhesions along the midline would be the only thing really need to work on it all.  Also I'm a fan of stripping the Dara before using a craniotome that's  personal choice ", 
" Very nice job with the Kusse A. you really have a nice feel for using it to do subfield I sections and do the latter resection which I believe you really have down now almost to no help work on your anatomy what kind where the head of the hippocampus is and look at articles that show especially Rhotons articles where the hippocampus is in the vascular structures ", 
" We talked about this already but as a reminder just using the 2 mm punch to alternate between upper and lower and do the side for you that's hardest to do which is the upper because of being right-handed first and then get the lower so it doesn't become detached and difficult to get. You did a really nice job on this case and you're clearly ready to just start seeing the variations to make you better hey Cydia surgeon nice touch great opening  and nice position at the retractors for CBD two and removal of the disc you got that down ", 
" With the CUSA A. excellent technique I think once you learn the anatomy this'll be very straightforward for you work on your anatomical locations but you got the approaching intersection down with the CUSA  quite well   Get the hippocampal anatomy down and the hippocampal sulcus is well as Uncus and medial structure in the other side of pia.   Also prepare yourself by practicing talking through released in your head what steps you're doing and what things are watching out for just beyond where you're working    Great effort very proud of how you perform today on Tampa lobectomy and especially your techniquenon not damaging any pia pretty amazing  ", 
" You did a nice job on the opening but with the drilling you need to do more work with the cutting burger before you start the diamond drill under the microscope so it's not such a deep dive through the bone spur and that will help a lot otherwise here very safe and did a nice job on getting the ligament off and open up the framing ", 
" You did a really great job on a really tough case and I'm very glad with how you handled the motor about potential changes and your overall complete decompression of the spinal cord safely. This is a very difficult case and you and Adam did a very nice job. The one thing we could improve upon is we should've done a better job with the osteophytes such that we were thinking about how's the play going to lay down at the end of the case but you and I slightly struggled with but we overcame that problem.  Sort of like the Stephen Covey in his book saying that we should think of the end from the beginning and how we handle our life and people we should do the same thing on these very difficult large osteophyte anterior cervical dissectomoes  maybe even getting a lateral C-spine in the middle of the case as we drill off the osteophytes we don't drill off too much or not enough ", 
" You did a really nice job on this DTRAX case I was proud that you handled the imaging guidance with the placement of the cage just continue to use the AP films all the time because that's the one place and get in trouble if you get two medium so nice job ", 
" You showed real improvement and excellent drilling which was very safe and meticulous I think younprogressed well from the first level to the last level which is really neat to see. You take small changes and critique really well and very positive manner which makes you really fun to work with I think you're making great progress on these cases and just you'll take a few more and you'll be rolling so good job ", 
"Alexa was very engaged and asked key questions. This case was unusual in that it was a revision and very difficult exposure. She was always trying to find ways to help.", 
"Almost there, drilling is spot on, just more thought on size of graft needed, you can always bring in the spacer after the early Kerrison part to make sure wide enough and just one more time hopefully opening the PLL and you are ready for final \"exam\". ", 
"Did a nice job on the technical part we need to work with Sinha and Eric on the planning part ", 
"Did well.\nAsking questions and discussing the case ahead of time seems to be helping.", 
"Doing a nice job on the drilling, more efficient as the day went along, again being careful not to go deep at the lateral margins when drilling and good pick up that our initial pin placement at top was in bad position, ", 
"ExcellEnt resident.  Great help", "Excellent exposure obviously putting on the electrode is not as easy at it looks but you persevered.", 
"Excellent job on the disc removal drilling and hardware placement the only thing is to work on angles of the distraction pins and their placement and also he did a really nice job on getting the scar tissue away from the plate I think you have that down. Distributor anatomy where the apex of the lung is and where the thoracic duct is that your little project to review outside and after the case anyway really nice job in good hands and good technique ", 
"Fully qualified. Taught me something!", "Getting it down, just need to be more aggressive with pushing the drill into the rostral caudal vert bodies otherwise doing well and need to get better at doing the dogbones.  Nice progress though even today in just two case. ", 
"Good ", "Good assistant", "Good case \n", "Good early start, need to work on finding that plane like we do in the ACDFs, feel with index finger the strap muscles medially then feel SCM and pick up and open the tissue between to drop into the natural plane.  Really nice job first time doing the vagal nerve stimulator lead placement.  Kind of a natural at doing it, usually people really struggle, once again you have nice hands when you work so keep that going.  ", 
"Good hands. Tough case. Thoughtful approach. ", "Good job getting into a tough joint obviously you learned a lot  from the day before doing a four level which really  helped to get it down you did a really nice job", 
"Good job on his first shunt with me", "Good prep. We will take you through these aced techniques quickly.  Practice in the touch surgery so you can talk me through the steps ", 
"Good technical skills. ", "Great ", "Great job. Just don't forget to keep getting more AP films as a protection against getting too medial  nice touch doing it and double check with initial instrument and working channel that it is Rick solid in facet joint ", 
"Great job. Very nice subpial dissection. Appropriate care to protect subpial structures.", 
"Great resident.  Asks good questions.  Good hands. ", "Hard case to do with me for a second or third case total", 
"He did great on the drilling today just need a little more work with the Kerison 's and getting off the poster lungitudinal ligament  otherwise he basically got this whole thing down good", 
"Hope seeing potential ways to deal with calcified disc, we could have also just left as is, and you had already done a great foraminotomy and decompression. ", 
"I hope watching me struggle showed you some of the pitfalls of these cases, making sure the xrays are perfectly aligned even before prep, don't use too much wag etc to get a good film, making sure patient's head is perfectly straight even after pulling on shoulders.  You did a great job putting yours in, making sure the introducer is rock solid.  Just for you keep asking for the APs as that is the only way to have something bad happen.  Nice work. ", 
"I would give myself a 3 on the finding the nerve since we had so much trouble.  I hope this case is an example of not being too proud to ask for help and again, look at the anatomy, maybe you can find us an article on the different variations of the vagus nerve in the neck.  Otherwise nice dissection, nice work on putting the leads on.  ", 
"JBC is progressing very well at a fast pace!", "Jackie was very engaged, helpful and enthusiastic and learns fast.  We have plans to review techniques for pedicle screw fixations ", 
"John is making remarkable improvements in performing complex technical procedures.  He pays very close attention to details and prepares well for the surgery. ", 
"Just keeping an eye on where the lower pin is on a four level case and using your disc space left right to help orient lower levels, other than that the drilling is coming along nicely and your dissection was wonderful.  ", 
"Just use both hands the one nearest skin to move tip medial and lateral on the AP and your more distant hand to adjust trajectory on AP and Lateral depth.  Otherwise great job and you nicely worked through the part on the second one when you were struggling.  First cage went perfect. ", 
"Kim did a good job in complex hydrocephalus case with lateral and fourth ventricular catheters, and navigating the scope through very distorted anatomy.", 
"Kim did a great job setting up the case, helping with halo application, and bony decompression, working at a tough angle with excellent results, including improved MEPs. Please note that ZPD 3 and 4 are not applicable for this case as this was simply a foramen magnum decompression - bone only", 
"Lumbar shunt most complex issue was in diagnosis and planning. Actual surgery for valve replacement straightforward with some plumbing connector issues. good job", 
"Making nice progress....on pace", "Mary demonstrated good anatomical knowledge. She has good surgical technique as well.", 
"Mary did a good job with this intrathecal catheter", "Mary was doing a fine job resecting the AVM.", 
"Much better getting right to anterior vertebral bodies still need the work on kitner movement, but your putting in screws is great, will be easy to go from zpd3 to complete.  Your hands again are great, so keep working, look at the 3D anatomy of the nerve roots and pedicle and relationship to the disc space, as if you could look through the vertebral body.  ", 
"Much better job on getting 5-0 up through PLL, again still need a little work on curette removal of endplate, next time we do one let me show you one level and you do the other one or two, drilling really nice job and safe, can drill a little of the thick PLL off with gentle drilling.  ", 
"Much improved exposure.", "Need to make sure on the skin closure that you get the skin approximated slightly better and you did a nice job on the opening except you need to keep the soft tissue away from the esophagus when you're doing your kitten dissection and rest wias great job and good job knowing what to do with the bird entry", 
"Nice intradural dissection of arachnoid bands.", "Nice job for first time just keep saying AP as that is the only way to get into trouble and  make sure positioning and flourio films are perfect before starting.  ", 
"Nice job making good progress and need to get to sides and drill further deeper. ", 
"Nice job on all aspects, more complete endplate removal with curette and improved efficiency in preparing endplates, other than that nice job.  ", 
"Nice job on the whole case, I like you are careful, would recommend get the specific pearls of anatomy (like orientation of L5 lamina, two ligaments and how to get interlaminar ligament off, check out an anatomy atlas to look at it now that you have done it, will make it more secure in your memory) down so you know when you can go faster but otherwise you have really nice touch and I feel you are very safe.  Also you have high standards for closures and overall how our patients do which is a very nice trait. ", 
"Nice job with the burr holes very careful which is good, a little more pressure and remember to do the swivel thing so the drill comes out easy.  craniotome, you were between a active and passive help so next time will have you do the whole early part.  Again I like you are careful but not too careful, be more \"pleasantly aggressive\" to get to do more stuff.  Nice working with you today.", 
"Nice job, next one should spend time on the intradural portion but I think you could have done this one but not much to do.  You did a really nice job on the drilling of both suboccipital and C1 bone work.  You have nice touch and hands doing surgery. ", 
"Nice job, really getting these down, quicker drilling on the zpd part 2 of the endplates square.  The other trick we used was to take out the Redmonds to get the distractor pins in and yes we need to be more careful where \"we\" place the pins, another thing is to get a second xray if things don't feel right or seem like a struggle. ", 
"Nice job:)\n\nEH", "Nice touch getting probe in place, just keep thinking that the only really bad thing is to get too medial so keep the ratio about 2:1 AP to Lat since every time we move our hand the concern is getting too medial. Good job keeping everything steady and just make sure it doesn't back out when you are using the awl by keeping good downward pressure.  You are only like 13 behind me so nice job.", 
"Nice touch with drilling, just make sure to get that burr buried as much as possible into the upper portion bone spur.  Again look at the preop cervical MRIs for vertebral artery location and where nerve roots are running in relation to bone spurs you are drilling off.  Really nice job and manner teaching.  Can I be your student?  Very relaxed and encouraging, but at the same time keeping them safe.  Stretching feedback would be that sometimes you have to take over a little when you are concerned or worried, which I was not yesterday, but just don't be too nice to not jump in when needed.  ", 
"Nice work, excellent drilling catching on really fast. ", "Nice work, got into a real rhythm during the second side.  ", 
"Nicely done.", "Only reason a 2 here for ZPD4 was because of case difficulty. Generally a 3. Setting up / planning (although technically incorrectly ZPD1) will be other areas to also focus on", 
"Only reason zpd3 instead of 4 was because I was teaching my preferences. ", 
"Quick pick up of opening and exposure, always be gentle with esophagus. Disc removal and drilling was good, and make sure to do the dogbone to get uncinate process. Nice work on removing PLL  Review nerve exits in relation to uncinate process .  Great answer on how to deal with vert injury", 
"RIght where he should be", "Ready", "Realize you had to leave to go to conference, but you did a really nice job on the one level you did do, and started to put together all you learned on the first hard case. Excited to see you get to no help on an easier case. Nice progress in just five levels today.  Good hands and control with the drill. very nice endplate preparation and not over drilling. ", 
"Really good job on tough case with minimal disc space.  Continue to visualize the angle of the disc space to get your Kerison into the tight space.  Work on the curve and corner of the lateral margins and then also try to get a little more lateral when drilling. Nice job knowing where to watch out for vert laterally.", 
"Really nice job, excellent decompression. but really solid technique.", 
"Really nice job, now just user finer points to increase efficiency, this was a routing 3 level but handled everything nice and safely", 
"Really nice like job on this one replaced everything well just continue to reminder self to keep checking AP film AP film a PSL to make sure not to medial the wise technically you're awesome really nice job younare cleared on these for sure", 
"Really nice touch on drilling, work on getting the hub of the drill head buried into the endplate on the upper endplate,  Nice opening smooth into the space between SCM and strap fascia.  Work on efficiency of the opening, time yourself not to rush but to gradually get quicker. ", 
"Really nice work on this one, getting more efficient and only thing would be to use that race track example of drilling in the recesses when under the scope.  You are getting really good at these. ", 
"Really tough case since not much disc space, getting better with curette, nice job with Kerison.  You will need to get the angle correct find the medial and lateral border and then carefully drill out the disc space keeping the line between the rostral and caudal vertebral body in the center.  We will work on this next time when we have a decent teaching case.  You have nice hands and technique once you get the jist of what you need to do, so should go quick once we get better cases.  ", 
"Really zod 4 is the scope part.  You did well with drill buried into endolate to get ost\303\203\302\251ophyte  off.  Would drill a little more and thin PLL off.  Nice job.  Trust you completely ", 
"Score of 1 here was only because double scrubbed - 2 likely more appropriate.", 
"She did extremely well with opening - faster and expertly done. Lost the plane a few times during resection, but this was difficult with the cyst. Incorporated teaching points as we moved throughout the case though.", 
"Showed how to set up\nLooking forward to n", "Solid opening and closing, again make sure you get in habit of seeing the needle go under dura so you don't catch a cortical vessel.  Really good technique with CUSA, natural job and the way you were able to come around that gyrus laterally shows you could do a resection right up against motor cortex along a sulcus and you caught on really well to where the gray white matter junction was located.  Also I really appreciate your energy and real engagement in the cases from preparing preop, taking it all in during the case and really doing great post op evals on the conclusion.  It is a pleasure to teach you.", 
"Steve did a great job in helping positioning and prepping. He also did an excellent job in closing dura on his side of the patch, and in closing.", 
"Steve did an exceptional job on a very hard tumor. I was impressed by his persistence.", 
"Steve was very attentive and helpful as we did this very difficult redo tethered cord. As an assistant he was already with the bipolar pedal and suction", 
"Steve was very helpful in this very difficult patient with history of split cord malformation, status post multiple surgeries including prior fusion, for this vertebral body resection and fusion for correction of kyphotic deformity.", 
"Taught the junior well. Some nuances of technique could be improved.", 
"Terrific job. You're a very fast learner. ", "Thanks for your help.  Tough case.  Think about the anatomy of the superior third ventricle and anterior thalmus", 
"Theresa did a fantastic job.  She is very attentive and always anticipates the next step.  She ask pertinent questions.  She has good surgical technique. ", 
"This is just a test so you can see how the third part will look. Thanks for helping me out this morning", 
"Tough case really deep, You did nice job getting to the disc space, slightly more aggressive with the Kitner, and really important to find that midline of the longismus, but was especially hard on this one\n\nGood hands and movement, work on your tying knots especially that first knot on the buried stitches. ", 
"Tough case when we are placing the play. It really nice job on the opening exposure drilling out the lowest have to localizes you can see sometimes to get an extra x-rays it's not a bad thing. I would say the trick is is how do you make a decision when things are all going to crap and we have to place the screws for the plate someplace else and I think we made a good decision to do that  tough case when we are placing the play. It really nice job on the opening exposure drilling out the lowest have to localizes you can see sometimes to get an extra x-rays it's not a bad thing. I would say the trick is is how do you make a decision when things are all going to crap and we have to place the screws for the plate someplace else and I think we made a good decision to do that", 
"Tough one due to the calcified disc, need to go to someplace other than where the disc is and find that plane, nice job on the drilling though.  Very safe and all calcified PLL removed. ", 
"Tough when PLL is stuck to dura, takes judgment when can and can't get through, you can see I struggled with how far to go to try to prevent CSF leak.  Great progress on drilling, did a very smooth job and much quicker, but still safte", 
"Very helpful ", "Very nice job on the opening and good that you have to identify the planes that's really nice that you see that difference.  You should be ready in the next couple of cases to finish off zod1 and In zod2  already too active help   In zod2 I think you need to work on making sure that the endplate drilling is very uniform going down but overall really nice job and is always had really good hands and take corrections well and fix things quickly", 
"Very smooth job we hope her sensory changes come back I doubt that's a big issue not unusual. Just have to be more careful with our retractors On the esophagus which we already went over.  otherwise great job on the part three drilling off the osteophyte under the scope that was  real slick today and just slightly over two hours for a three level acdf and strong work so you really got this down just a matter of refining how to get that  in there with the Kerison  to take off the posterior longitudinal ligament", 
"We discussed main issues being drilling slightly more of the upper osteophyte, drill not touching sucker, and being picky about where the plate is in relation to the upper and lower disc space.  Your overall technique is great and the more you see situations like this the more you'll know what I would do in certain situations and that should hopefully increase your comfort level, as you progress.  ", 
"Well prepared. Great job", "You did a great job for really hard case. Spells missed difficult to get six up for the case to get after this one and the bone spurs and even larger deep thick neck large bone spurs This made it very hard but you were patient and getting Exposure need to get so overall great job", 
"You did a nice job on tough case.  We will work on finalizing this portion next time.  Look up superior and external laryngeal nerve course and innervation. ", 
"You did a very nice dissection, identified the nerve.  Lesson learned is to not put that retractor in too early which could pull a more superficial nerve more anterior.  Really fast putting the electrodes on, and you now really get the holding the hub and using it to get the electrodes where you want them to go.   ", 
"You do a very nice job on the PLL and drilling, just look at some anatomy of cross sections on MRI to see what direction the nerves run at the edge of the foramen, you will see how they really do move anterior or more superficial so when you are drilling those corners you always tend for more superficial.  Otherwise nice job teaching you are very patient, make sure when helping others they color within the lines.  Jackie did a nice job on the second level so good to see her take corrections so well, I think and hope that occurs because she is in a safe learning environment which you definitely provide. ", 
"You got this down, two tip, use the bury the drill head into the vertebral body above and below and do the race track thing at the corners and then make sure do the dogbone, otherwise you were great. ", 
"You have all the steps, just need to work on drilling the superior bone spur, and how to use drill into the bone to get bigger osteophyte off the top.  On opening really work to find each longismus will help you. Nice job on plate placement", 
"You need to work on your anatomy and slightly more aggressive using the Kittner and again use your anatomy locations for depth avoid complications", 
"ZPD1 is actually not the easiest / least important part of the case!\n\nGood job today!", 
"excellent engagement, inquisitive, work on anatomy on \"next steps\", i.e. what is just behind or lateral or ahead of you on each step, like Vertebral Artery location, where nerve root is located compared to Joint of Luscka, really picked up quickly the technical details.  ", 
"excellent help for a case not scrubbed on for > 3 yr.", "excellent start and terrific to be so inquisitive.", 
"excellent start!", "excellent!", "good engagement, read up on superficial to deep anatomy, like course of superior laryngeal nerve, what it effects, what would you do with a vert injury, and esophageal tear. ", 
"good job on tight Chiari", "good job on tight Chiari in a young patient.", 
"good starting point!", "great ", "need to demonstrate that you know each step and are comfortable proceeding through the surgery more independently.", 
"nice job, goes to show  your \"technical\" abilities and 3D anatomy are great for minimally invasive procedures,  More awareness that need lots of AP spot views since that is the only place where can get in big trouble being too medial.  Also need to review the CT more carefully (me included) to see if the joint looks fused which could limit DTRAX usage.   Otherwise, really nice job on this. ", 
"nice job, you are a battery replacement pro, I like the close the pocket deep approach", 
"nice work", "nice work, appreciate you be careful with the leads as any damage means the VNS can't be replaced due to scarring on nerve. ", 
"tough one due to depth and thickness of neck and being redo, but you overcame the struggles. As we discussed the longer incision would have helped some.  I have gone away except on the most thin women's neck to doing a slightly longer incision they all heal well if in skin crease.  Also again really need to bury the drill head into upper osteophyte so less to take off with Kerison. ", 
"two more and you are done.  Just can't take enough APs, otherwise really nice job "
), class = "factor"), q6_zones_use = structure(c(3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("No", "Partially", 
"Yes"), class = "factor"), case_date = structure(c(18L, 19L, 
20L, 20L, 21L, 23L, 22L, 22L, 22L, 24L, 24L, 25L, 25L, 26L, 26L, 
26L, 26L, 27L, 27L, 28L, 28L, 29L, 29L, 29L, 29L, 14L, 14L, 14L, 
30L, 15L, 15L, 15L, 16L, 16L, 16L, 14L, 14L, 3L, 16L, 16L, 2L, 
3L, 3L, 4L, 16L, 16L, 16L, 4L, 1L, 5L, 5L, 5L, 5L, 5L, 5L, 4L, 
5L, 5L, 6L, 7L, 7L, 3L, 8L, 8L, 8L, 8L, 9L, 10L, 10L, 11L, 11L, 
11L, 11L, 12L, 12L, 31L, 13L, 13L, 35L, 36L, 36L, 37L, 32L, 33L, 
33L, 33L, 33L, 34L, 34L, 38L, 38L, 40L, 41L, 39L, 39L, 50L, 42L, 
43L, 43L, 43L, 43L, 44L, 44L, 45L, 46L, 46L, 17L, 48L, 47L, 49L, 
60L, 60L, 64L, 64L, 65L, 51L, 51L, 52L, 52L, 53L, 54L, 54L, 55L, 
52L, 55L, 55L, 56L, 51L, 55L, 55L, 57L, 57L, 58L, 58L, 58L, 59L, 
59L, 61L, 58L, 51L, 51L, 51L, 57L, 65L, 62L, 22L, 66L, 66L, 74L, 
76L, 76L, 75L, 75L, 76L, 76L, 76L, 77L, 22L, 67L, 68L, 69L, 69L, 
69L, 71L, 73L, 73L, 73L, 72L, 72L, 70L, 70L, 70L, 91L, 31L, 92L, 
97L, 92L, 93L, 93L, 93L, 95L, 96L, 94L, 94L, 94L, 15L, 79L, 78L, 
79L, 79L, 79L, 80L, 80L, 5L, 81L, 81L, 81L, 80L, 82L, 83L, 84L, 
84L, 85L, 85L, 84L, 87L, 12L, 89L, 90L, 90L, 90L, 86L, 88L, 42L, 
63L, 76L, 77L, 67L, 67L, 76L, 69L), .Label = c("", "1-Jan", "1/10/17", 
"1/11/17", "1/12/17", "1/13/17", "1/17/17", "1/18/17", "1/19/17", 
"1/24/17", "1/25/17", "1/26/17", "1/31/17", "1/4/17", "1/5/17", 
"1/9/17", "10/28/16", "11/21/16", "11/22/16", "11/23/16", "11/28/16", 
"11/29/16", "11/30/16", "12/14/16", "12/15/16", "12/20/16", "12/21/16", 
"12/27/16", "12/28/16", "12/29/16", "2/1/17", "2/13/17", "2/15/17", 
"2/16/17", "2/2/17", "2/7/17", "2/8/17", "3/1/17", "3/15/17", 
"3/8/17", "3/9/17", "4/12/17", "4/19/17", "4/20/17", "4/25/17", 
"4/26/17", "4/27/17", "4/28/17", "4/29/17", "4/5/17", "5/10/17", 
"5/11/17", "5/12/17", "5/15/17", "5/17/17", "5/18/17", "5/19/17", 
"5/24/17", "5/25/17", "5/3/17", "5/30/17", "5/31/17", "5/4/17", 
"5/8/17", "5/9/17", "6/1/17", "6/19/17", "6/20/17", "6/21/17", 
"6/22/17", "6/23/17", "6/26/17", "6/28/17", "6/3/17", "6/5/17", 
"6/7/17", "6/8/17", "7/10/17", "7/11/17", "7/12/17", "7/13/17", 
"7/14/17", "7/17/17", "7/18/17", "7/19/17", "7/20/17", "7/21/17", 
"7/25/17", "7/27/17", "7/28/17", "7/3/17", "7/5/17", "7/6/17", 
"7/7/17", "Chiari Decompression", "VP shunt revision", "acdf"
), class = "factor"), resident = structure(c(1L, 1L, 8L, 8L, 
1L, 1L, 7L, 7L, 7L, 1L, 1L, 8L, 8L, 1L, 1L, 1L, 1L, 8L, 9L, 1L, 
1L, 1L, 1L, 1L, 1L, 11L, 11L, 3L, 6L, 11L, 6L, 6L, 6L, 7L, 7L, 
12L, 12L, 6L, 1L, 1L, 9L, 1L, 1L, 9L, 6L, 6L, 6L, 6L, 6L, 3L, 
6L, 6L, 7L, 7L, 11L, 11L, 3L, 11L, 6L, 13L, 13L, 1L, 8L, 11L, 
8L, 11L, 11L, 1L, 1L, 6L, 1L, 1L, 11L, 9L, 9L, 9L, 1L, 1L, 6L, 
11L, 11L, 9L, 6L, 7L, 7L, 6L, 6L, 6L, 6L, 13L, 13L, 13L, 13L, 
2L, 2L, 1L, 2L, 2L, 2L, 9L, 9L, 12L, 12L, 12L, 7L, 7L, 12L, 7L, 
9L, 7L, 2L, 2L, 7L, 7L, 7L, 2L, 2L, 2L, 2L, 7L, 12L, 12L, 2L, 
2L, 13L, 13L, 2L, 7L, 13L, 13L, 12L, 12L, 9L, 9L, 7L, 7L, 7L, 
7L, 7L, 7L, 7L, 7L, 7L, 7L, 2L, 7L, 7L, 7L, 7L, 13L, 9L, 2L, 
11L, 2L, 13L, 9L, 9L, 7L, 7L, 4L, 12L, 4L, 6L, 4L, 6L, 4L, 4L, 
4L, 4L, 4L, 4L, 2L, 4L, 1L, 5L, 1L, 5L, 14L, 14L, 6L, 10L, 10L, 
4L, 6L, 5L, 6L, 14L, 1L, 10L, 4L, 14L, 2L, 2L, 6L, 4L, 10L, 5L, 
10L, 6L, 10L, 7L, 4L, 2L, 14L, 10L, 10L, 9L, 10L, 10L, 10L, 5L, 
5L, 5L, 2L, 7L, 9L, 9L, 7L, 7L, 9L, 12L), .Label = c("Alexa Bramall, M.D.", 
"Andrew Cutler, M.D.", "Jacquelyn Corley, M.D", "John Berry-Candelario, M.D.", 
"Jordan Komisarow, M.D.", "Kimberly Hoang, M.D.", "Mary Cobb, M.D.", 
"Ranjith Babu M.D.", "Shervin Rahimpour, M.D.", "Stephen Harward, M.D.", 
"Steven Cook, M.D.", "Theresa Williamson, M.D.", "Timothy Miller, M.D.", 
"Vikram Mehta, M.D."), class = "factor"), year = structure(c(1L, 
1L, 2L, 2L, 1L, 1L, 4L, 4L, 4L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L, 
2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 4L, 4L, 1L, 3L, 4L, 3L, 3L, 3L, 
4L, 4L, 2L, 2L, 3L, 1L, 1L, 2L, 1L, 1L, 2L, 3L, 3L, 3L, 3L, 3L, 
1L, 3L, 3L, 4L, 4L, 4L, 4L, 1L, 4L, 3L, 3L, 3L, 1L, 2L, 4L, 2L, 
4L, 4L, 1L, 1L, 3L, 1L, 1L, 4L, 2L, 2L, 2L, 1L, 1L, 3L, 4L, 4L, 
2L, 3L, 4L, 4L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 
1L, 1L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 2L, 4L, 2L, 4L, 1L, 1L, 4L, 
4L, 4L, 1L, 1L, 1L, 1L, 4L, 2L, 2L, 1L, 1L, 3L, 3L, 1L, 4L, 3L, 
3L, 2L, 2L, 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 
4L, 4L, 4L, 4L, 3L, 2L, 1L, 4L, 1L, 3L, 2L, 2L, 4L, 5L, 5L, 2L, 
5L, 4L, 5L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 1L, 5L, 1L, 3L, 2L, 3L, 
1L, 1L, 4L, 1L, 1L, 5L, 4L, 3L, 3L, 1L, 2L, 1L, 5L, 1L, 2L, 2L, 
3L, 5L, 1L, 3L, 1L, 4L, 1L, 5L, 5L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 
1L, 3L, 3L, 3L, 1L, 4L, 2L, 2L, 5L, 5L, 2L, 2L), .Label = c("PGY2", 
"PGY3", "PGY5", "PGY6", "PGY7"), class = "factor"), attending = structure(c(2L, 
4L, 11L, 11L, 12L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 12L, 
12L, 12L, 12L, 11L, 11L, 12L, 12L, 12L, 12L, 12L, 12L, 11L, 11L, 
9L, 11L, 10L, 10L, 10L, 15L, 12L, 12L, 11L, 11L, 5L, 16L, 16L, 
11L, 12L, 12L, 11L, 8L, 8L, 8L, 8L, 8L, 11L, 11L, 11L, 4L, 4L, 
16L, 6L, 11L, 11L, 11L, 12L, 12L, 12L, 11L, 11L, 11L, 11L, 10L, 
12L, 12L, 5L, 11L, 11L, 11L, 11L, 11L, 11L, 12L, 12L, 10L, 4L, 
4L, 11L, 3L, 11L, 11L, 11L, 11L, 10L, 10L, 11L, 11L, 11L, 11L, 
11L, 11L, 9L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 9L, 11L, 11L, 
2L, 9L, 11L, 13L, 11L, 11L, 3L, 3L, 8L, 11L, 11L, 11L, 11L, 5L, 
16L, 16L, 11L, 11L, 11L, 11L, 15L, 6L, 11L, 11L, 9L, 9L, 11L, 
11L, 9L, 15L, 5L, 8L, 6L, 6L, 6L, 6L, 6L, 6L, 11L, 11L, 5L, 5L, 
9L, 13L, 11L, 15L, 15L, 9L, 13L, 11L, 11L, 11L, 1L, 9L, 11L, 
13L, 6L, 9L, 13L, 16L, 16L, 16L, 16L, 16L, 16L, 16L, 16L, 11L, 
11L, 11L, 11L, 11L, 11L, 11L, 5L, 5L, 5L, 15L, 15L, 10L, 4L, 
15L, 8L, 9L, 4L, 11L, 11L, 11L, 16L, 8L, 4L, 3L, 7L, 8L, 15L, 
9L, 11L, 11L, 5L, 8L, 11L, 5L, 5L, 5L, 14L, 14L, 4L, 11L, 3L, 
11L, 11L, 1L, 1L, 11L, 11L), .Label = c("Allan Friedman, M.D.", 
"Avra Laarakker", "Carrie Muh, M.D.", "Dennis Turner, M.D.", 
"Eric Thompson, M.D.", "Erik Hauck, M.D.", "Fernando Gonzalez, M.D.", 
"Herbert Fuchs, M.D., Ph.D.", "Isaac Karikari, M.D.", "John Sampson, M.D., Ph.D.", 
"Michael Haglund, M.D., Ph.D.", "Nandan Lad, M.D., Ph.D.", "Oren Gottfried, M.D.", 
"Patrick Codd, M.D.", "Peter Fecci, M.D., Ph.D.", "Robert Isaacs, M.D."
), class = "factor"), subspecialty = structure(c(1L, 1L, 3L, 
1L, 1L, 3L, 3L, 3L, 3L, 3L, 3L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 3L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 3L, 3L, 
3L, 3L, 2L, 3L, 3L, 3L, 1L, 1L, 3L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 3L, 1L, 3L, 4L, 
1L, 1L, 2L, 1L, 1L, 1L, 3L, 1L, 1L, 1L, 1L, 4L, 1L, 1L, 3L, 1L, 
1L, 3L, 3L, 3L, 4L, 4L, 3L, 1L, 3L, 3L, 3L, 3L, 3L, 3L, 1L, 1L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 5L, 3L, 3L, 4L, 3L, 3L, 2L, 1L, 2L, 
2L, 3L, 3L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 3L, 3L, 3L, 
3L, 1L, 3L, 3L, 4L, 2L, 1L, 2L, 4L, 5L, 5L, 4L, 5L, 3L, 3L, 2L, 
2L, 3L, 3L, 3L, 4L, 4L, 3L, 3L, 3L, 1L, 3L, 4L, 3L, 3L, 3L, 5L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 2L, 2L, 2L, 4L, 4L, 4L, 1L, 4L, 2L, 3L, 1L, 3L, 3L, 3L, 3L, 
2L, 3L, 2L, 5L, 2L, 4L, 3L, 3L, 3L, 2L, 2L, 3L, 2L, 2L, 2L, 4L, 
4L, 1L, 3L, 2L, 3L, 1L, 3L, 3L, 3L, 3L), .Label = c("Functional", 
"Pediatrics", "Spine", "Tumor", "Vascular"), class = "factor"), 
    case = structure(c(13L, 30L, 1L, 13L, 34L, 1L, 1L, 25L, 1L, 
    1L, 1L, 13L, 1L, 31L, 31L, 31L, 30L, 14L, 1L, 34L, 24L, 31L, 
    30L, 23L, 30L, 31L, 1L, 27L, 1L, 37L, 45L, 37L, 37L, 41L, 
    25L, 1L, 1L, 6L, 46L, 18L, 25L, 16L, 34L, 1L, 22L, 44L, 5L, 
    5L, 44L, 1L, 1L, 1L, 19L, 19L, 1L, 25L, 1L, 1L, 1L, 20L, 
    23L, 16L, 14L, 1L, 14L, 1L, 37L, 34L, 34L, 15L, 12L, 14L, 
    12L, 1L, 11L, 11L, 34L, 34L, 37L, 35L, 33L, 1L, 13L, 14L, 
    1L, 19L, 1L, 5L, 37L, 1L, 10L, 18L, 25L, 1L, 1L, 25L, 1L, 
    31L, 31L, 1L, 1L, 18L, 1L, 25L, 1L, 1L, 8L, 27L, 1L, 37L, 
    1L, 1L, 44L, 14L, 44L, 5L, 1L, 25L, 5L, 39L, 26L, 17L, 1L, 
    25L, 1L, 25L, 37L, 37L, 25L, 1L, 41L, 19L, 10L, 1L, 18L, 
    36L, 44L, 16L, 44L, 37L, 4L, 4L, 37L, 28L, 1L, 25L, 7L, 44L, 
    19L, 2L, 25L, 37L, 37L, 19L, 27L, 1L, 11L, 25L, 38L, 32L, 
    25L, 41L, 4L, 21L, 25L, 25L, 25L, 26L, 46L, 19L, 40L, 40L, 
    21L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 5L, 44L, 44L, 37L, 38L, 
    29L, 35L, 37L, 6L, 42L, 35L, 25L, 1L, 1L, 46L, 6L, 3L, 9L, 
    8L, 44L, 38L, 32L, 1L, 1L, 44L, 5L, 1L, 15L, 44L, 44L, 37L, 
    43L, 31L, 1L, 6L, 1L, 11L, 19L, 19L, 1L, 25L), .Label = c("ACDF", 
    "ALIF", "Anterior cervical corpectomy", "Arteriovenous Malformation Resection", 
    "Chiari Decompression", "Complex Tethered Cord/Spinal Dysraphism", 
    "Craniosynostosis (Endoscopic/CVR)", "EC-IC Bypass", "Endoscopic CSF Diversion (ETV, cyst fenestration)", 
    "Epilepsy-Depth Electrodes", "Epilepsy-Extratemporal Resection", 
    "Epilepsy-Grids/Strips", "Epilepsy-Temporal Lobectomy", "Epilepsy-VNS", 
    "Infratentorial (midline suboccipital, lateral) Craniotomy for Tumor", 
    "Intrathecal Pump", "Kyphoplasty/Vertebroplasty", "Lumbar discectomy", 
    "Lumbar laminectomy", "Nucleus Caudalis DREZ (Atypical Facial Pain)", 
    "Occipitocervical fusion", "Occipitocervical/C1-2 fusion", 
    "Percutaneous Epidural SCS Trial", "Permanent Paddle SCS Implant", 
    "Posterior cervical fusion", "Posterior cervical laminoplasty", 
    "Posterior lumbar Fusion (no interbody)", "Pterional Craniotomy for Anterior Circulation Aneurysm", 
    "Radiosurgery", "Revision/Removal SCS/Neurostimulator Implant", 
    "Revision/Replacement of internal pulse generator", "Scoliosis correction (kyphosis/scoliosis)", 
    "Stage 1-Awake Frame-based DBS", "Stage 1-Awake Frameless DBS", 
    "Stage 2-DBS-implantation of internal pulse generator", "Sub-occipital Decompression", 
    "Supratentorial (convexity) Craniotomy for Tumor", "Supratentorial (interhemispheric/bifrontal) Craniotomy for Tumor", 
    "Supratentorial Craniotomy for Tumor", "TLIF (MIS)", "TLIF (open)", 
    "Thoracic Fusion", "Transphenoidal Sellar/Parasellar tumors (endoscopic and microsurgical)", 
    "VP Shunt", "VP Shunt for NPH", "XLIF (lumbar)"), class = "factor"), 
    zpd = structure(c(3L, 2L, 4L, 4L, 2L, 2L, 4L, 3L, 4L, 2L, 
    2L, 2L, 4L, 2L, 2L, 2L, 2L, 3L, 5L, 2L, 2L, 3L, 3L, 3L, 2L, 
    5L, 5L, 2L, 4L, 1L, 1L, 1L, 1L, 5L, 5L, 3L, 3L, 4L, 1L, 2L, 
    2L, 3L, 3L, 5L, 3L, 4L, 4L, 4L, 4L, 2L, 4L, 4L, 5L, 5L, 5L, 
    5L, 3L, 5L, 4L, 5L, 5L, 3L, 4L, 5L, 4L, 5L, 1L, 3L, 4L, 3L, 
    2L, 2L, 5L, 5L, 3L, 4L, 5L, 5L, 1L, 5L, 5L, 5L, 5L, 4L, 4L, 
    5L, 5L, 1L, 1L, 5L, 4L, 5L, 4L, 2L, 2L, 2L, 3L, 5L, 5L, 4L, 
    5L, 4L, 4L, 3L, 4L, 2L, 4L, 3L, 5L, 1L, 4L, 4L, 4L, 3L, 4L, 
    2L, 4L, 2L, 3L, 4L, 3L, 4L, 4L, 2L, 5L, 5L, 1L, 1L, 5L, 5L, 
    4L, 5L, 2L, 2L, 4L, 1L, 4L, 5L, 5L, 1L, 1L, 1L, 1L, 1L, 4L, 
    3L, 5L, 5L, 4L, 5L, 4L, 1L, 1L, 3L, 5L, 5L, 5L, 3L, 1L, 4L, 
    4L, 5L, 1L, 5L, 4L, 5L, 5L, 5L, 1L, 5L, 5L, 5L, 5L, 3L, 4L, 
    3L, 4L, 2L, 2L, 4L, 2L, 2L, 5L, 1L, 1L, 1L, 2L, 1L, 2L, 5L, 
    2L, 5L, 4L, 4L, 1L, 2L, 4L, 2L, 1L, 2L, 1L, 5L, 4L, 2L, 3L, 
    3L, 5L, 2L, 3L, 3L, 1L, 1L, 5L, 3L, 4L, 5L, 5L, 5L, 5L, 5L, 
    4L), .Label = c("", "ZPD1", "ZPD2", "ZPD3", "ZPD4"), class = "factor"), 
    aZPD1 = c(4L, 1L, 4L, 4L, 2L, 2L, 4L, 4L, 4L, 2L, 3L, 3L, 
    4L, 3L, 3L, 3L, 2L, 4L, 4L, 3L, 3L, 4L, 3L, 4L, 3L, 4L, 4L, 
    3L, 4L, 4L, 4L, 4L, 3L, 4L, 4L, 4L, 4L, 4L, 3L, 1L, 4L, 4L, 
    4L, 4L, 4L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 3L, 4L, 2L, 4L, 
    4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 3L, 4L, 
    4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
    1L, 4L, 4L, 3L, 4L, 4L, 2L, 1L, 2L, 3L, 4L, 4L, 4L, 3L, 4L, 
    4L, 3L, 4L, 3L, 4L, 3L, 4L, 4L, 4L, 4L, 4L, 3L, 2L, 4L, 3L, 
    4L, 4L, 3L, 4L, 3L, 4L, 4L, 4L, 4L, 3L, 1L, 4L, 4L, 4L, 4L, 
    4L, 4L, 4L, 3L, 4L, 4L, 1L, 2L, 1L, 1L, 2L, 1L, 4L, 2L, 4L, 
    4L, 4L, 4L, 4L, 3L, 4L, 3L, 4L, 4L, 4L, 2L, 4L, 4L, 4L, 4L, 
    4L, 4L, 4L, 4L, 3L, 4L, 4L, 4L, 4L, 2L, 4L, 4L, 4L, 4L, 4L, 
    1L, 2L, 4L, 2L, 3L, 4L, 4L, 4L, NA, 2L, 3L, 2L, 4L, 1L, 4L, 
    4L, 3L, 4L, 2L, 3L, 2L, 4L, 2L, 3L, 4L, 4L, 2L, 3L, 2L, 4L, 
    3L, 3L, 3L, 4L, 4L, 4L, 3L, 3L, 4L, 3L, 3L, 3L, 4L, 4L), 
    aZPD2 = c(2L, 1L, 4L, 2L, 2L, 1L, 2L, 2L, 4L, 1L, 1L, 2L, 
    4L, 3L, 3L, 3L, 1L, 3L, 4L, 3L, 1L, 4L, 2L, 3L, 3L, 4L, 4L, 
    2L, 4L, 4L, 4L, 4L, 3L, 4L, 4L, 2L, 3L, 2L, 1L, 1L, 4L, 2L, 
    4L, 4L, 3L, 3L, 3L, 3L, 3L, 2L, 4L, 4L, 4L, 2L, 4L, 2L, 3L, 
    4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 3L, 2L, 2L, 
    4L, 4L, 2L, 4L, 4L, 4L, 4L, 4L, 3L, 4L, 3L, 4L, 4L, 4L, 4L, 
    4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 2L, 2L, 4L, 4L, 4L, 4L, 3L, 
    3L, 3L, 3L, 4L, 3L, 3L, 4L, 4L, 3L, 1L, 3L, 2L, 2L, 3L, 4L, 
    3L, 4L, 3L, 4L, 3L, 4L, 3L, 4L, 4L, 3L, 1L, 4L, 4L, 4L, 4L, 
    4L, 4L, 4L, 3L, 4L, 4L, 1L, 1L, 1L, 1L, 2L, 1L, 4L, 2L, 2L, 
    4L, 4L, 4L, 4L, 2L, 4L, 2L, 4L, 4L, 4L, 2L, 2L, 4L, 4L, 4L, 
    4L, 4L, 4L, 4L, 3L, 4L, 4L, 4L, 4L, 3L, 4L, 2L, 3L, 2L, 4L, 
    1L, 1L, 4L, 2L, 3L, 4L, 4L, 3L, NA, 2L, 3L, 1L, 4L, 1L, 4L, 
    4L, 3L, 4L, 1L, 2L, 2L, 4L, 2L, 4L, 4L, 4L, 1L, 2L, 2L, 4L, 
    1L, 2L, 2L, 3L, 4L, 4L, 2L, 3L, 4L, 3L, 3L, 3L, 4L, 3L), 
    aZPD3 = c(2L, 2L, 2L, 2L, 2L, 1L, 2L, 2L, 2L, 1L, 1L, 3L, 
    3L, 2L, 3L, 3L, 1L, 4L, 4L, 2L, 1L, 4L, 2L, 2L, 3L, 4L, 4L, 
    2L, 4L, 4L, 4L, 3L, 3L, 4L, 4L, 1L, 1L, 3L, 1L, 1L, 4L, 2L, 
    3L, 4L, 4L, 3L, 3L, 3L, 3L, 1L, 4L, 4L, 3L, 2L, 3L, 2L, 1L, 
    4L, 4L, 4L, 3L, 2L, 3L, 4L, 4L, 4L, 4L, 3L, 3L, 2L, 1L, 2L, 
    3L, 4L, 2L, 2L, 4L, 4L, 4L, 4L, 3L, 4L, 3L, 3L, 3L, 4L, 4L, 
    4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L, 4L, 4L, 3L, 3L, 3L, 
    3L, 3L, 3L, 4L, 3L, 3L, 4L, 4L, 2L, 2L, 3L, 2L, 2L, 1L, 3L, 
    3L, 2L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 2L, 1L, 4L, 4L, 2L, 4L, 
    4L, 4L, 4L, 3L, 2L, 4L, 2L, 1L, 1L, 1L, 1L, 1L, 3L, 2L, 3L, 
    4L, 4L, 4L, 4L, 2L, 4L, 2L, 4L, 4L, 3L, 2L, 2L, 3L, 4L, 4L, 
    3L, 4L, 3L, 3L, 4L, 4L, 3L, 4L, 3L, 2L, 3L, 1L, 3L, 1L, 3L, 
    1L, 1L, 4L, 2L, 2L, 4L, 4L, 3L, NA, 2L, 2L, 1L, 4L, 1L, 4L, 
    4L, 3L, 3L, 1L, 2L, 2L, 2L, 2L, 4L, 4L, 3L, 1L, 2L, 1L, 3L, 
    1L, 2L, 2L, 3L, 3L, 4L, 1L, 3L, 4L, 2L, 3L, 3L, 4L, 4L), 
    aZPD4 = c(1L, 2L, 4L, 4L, 2L, 1L, 2L, 2L, 2L, 2L, 2L, 1L, 
    4L, 2L, 2L, 3L, 1L, 4L, 4L, 2L, 1L, 3L, 2L, 2L, 3L, 4L, 4L, 
    2L, 3L, 2L, 3L, 2L, 2L, 3L, 3L, 3L, 3L, 4L, 1L, 1L, 4L, 2L, 
    2L, 4L, 4L, 3L, 3L, 3L, 3L, 1L, 4L, 4L, 4L, 3L, 3L, 2L, 2L, 
    4L, 4L, 3L, 4L, 2L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 1L, 2L, 
    4L, 4L, 4L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 3L, 4L, 4L, 4L, 4L, 
    4L, 3L, 4L, 4L, 4L, 4L, 2L, 2L, 1L, 3L, 4L, 4L, 4L, 4L, 3L, 
    4L, 3L, 4L, 4L, 3L, 3L, 4L, 3L, 1L, 3L, 3L, 4L, 2L, 1L, 3L, 
    4L, 2L, 2L, 3L, 3L, 4L, 3L, 4L, 4L, 1L, 1L, 4L, 4L, 2L, 3L, 
    4L, 4L, 3L, 2L, 4L, 4L, 2L, 1L, 1L, 1L, 1L, 2L, 4L, 2L, 3L, 
    3L, 4L, 4L, 4L, 2L, 3L, 2L, 4L, 4L, 4L, 2L, 1L, 3L, 4L, 3L, 
    4L, 2L, 3L, 3L, 3L, 4L, 3L, 4L, 4L, 2L, 4L, 1L, 4L, 1L, 4L, 
    2L, 2L, 4L, 1L, 2L, 4L, 2L, 1L, NA, 2L, 1L, 1L, 4L, 1L, 4L, 
    4L, 3L, 3L, 1L, 2L, 2L, 3L, 2L, 3L, 3L, 4L, 1L, 3L, 1L, 3L, 
    1L, 3L, 3L, 3L, 4L, 4L, 1L, 3L, 4L, 2L, 3L, 3L, 4L, 4L)), .Names = c("X...recoder_date", 
"record_duration", "q2_feedback_during_operation", "q6_zones_use", 
"case_date", "resident", "year", "attending", "subspecialty", 
"case", "zpd", "aZPD1", "aZPD2", "aZPD3", "aZPD4"), row.names = c(NA, 
-221L), class = "data.frame")

data_01$case_date1<-mdy(data_01$case_date)

data_01$zpd<-car::recode(data_01$zpd,"'ZPD 4'='ZPD4'")

#all data
data_all<-data_01

data_all$resident<-c("All")
data_all$subspecialty<-c("All")
data_all$case<-c("All")

#all subspecialy specific
data_all_resident<-data_01

data_all_resident$resident<-data_01$resident
data_all_resident$subspecialty<-c("All")
data_all_resident$case<-c("All")

#all subspecialy specific
data_all_subespecialty<-data_01

data_all_subespecialty$resident<-c("All")
data_all_subespecialty$subspecialty<-data_01$subspecialty
data_all_subespecialty$case<-c("All")

#all case specific
data_all_case<-data_01

data_all_case$resident<-c("All")
data_all_case$subspecialty<-c("All")
data_all_case$case<-data_01$case

#all resident and subspecialy specific
data_all_residentsubs<-data_01

data_all_residentsubs$resident<-data_01$resident
data_all_residentsubs$subspecialty<-data_01$subspecialty
data_all_residentsubs$case<-c("All")

#all resident and case specific
data_all_residentcase<-data_01

data_all_residentcase$resident<-data_01$resident
data_all_residentcase$subspecialty<-c("All")
data_all_residentcase$case<-data_01$case

#all  case and subespecialty specific
data_all_casesubs<-data_01

data_all_casesubs$resident<-c("All")
data_all_casesubs$subspecialty<-data_01$subspecialty
data_all_casesubs$case<-data_01$case

data_0<-rbind(data_01,
              data_all,
              data_all_resident,
              data_all_subespecialty,
              data_all_case,
              data_all_residentsubs,
              data_all_residentcase,
              data_all_casesubs)

data_0$case_date1<-mdy(data_0$case_date)

data_0$zpd<-car::recode(data_0$zpd,"'ZPD 4'='ZPD4'")

# data$recoder_date1<-as.POSIXct(data$recoder_date,
#                       format='%m/%d/%y %H:%M')

# pkgStream is a reactive expression that represents a stream of
# new package download data; up to once a second it may return a
# data frame of new downloads since the last update.
# pkgStream <- packageStream()

# pkgData is a reactive expression that accumulates previous values
# of pkgStream, discarding any that are older than maxAgeSecs.
# maxAgeSecs <- 60 * 5 
# pkgData <- packageData(pkgStream, maxAgeSecs)
```

Inputs {.sidebar} {heigth=1000}
-------------------------------------------------------------------  
### SAP dashboard
  

```{r}

# Rate at which to flag high download traffic
 # selectInput("attending", label = h3("Attending"), 
 #    choices = c("All", unique(as.character(data_0$attending))),
 #    selected="All")

# Rate at which to flag high download traffic
 selectInput("resident", label = h3("Resident"), 
    choices = c("All", unique(as.character(data_01$resident))),
    selected="All")

 # Rate at which to flag high download traffic
 selectInput("subspecialty", label = h3("Subspecialty"), 
    choices = c("All", unique(as.character(data_01$subspecialty))),
    selected="All")

 # Rate at which to flag high download traffic
 selectInput("case", label = h3("Case"), 
    choices = c("All", unique(as.character(data_01$case))),
    selected="All")

  # Rate at which to flag high download traffic
passwordInput("attending", "Attending:")
#              actionButton("go","Go"),
#              verbatimTextoutput("value"))

# # Maximum number of raw data rows to keep
# numericInput("maxrows", "Recent procedures and scores:", 10)

   # if (input$resident != "All") {
   #    data <- data[data$resident == input$resident,]
   #  }
   #  if (input$subspecialty != "All") {
   #    data <- data[data$subspecialty == input$subspecialty,]
   #  }
   #  if (input$case != "All") {
   #    data <- data[data$case == input$case,]
   #  }
# })
# data<-subset(data_0,data_0$subspecialty == subspecialty)
# data<-subset(data_0,data_0$case == case)

```


Column
-------------------------------------------------------------------

### Faculty use of ZPDs (%)  {.value-box}

```{r}
# dlCount is a reactive expression that keeps track of the total
# number of rows that have ever appeared through pkgStream.
# dlCount <- downloadCount(pkgStream)

observe({
    x <- input$subspecialty

    if (is.null(x) || x == "All") {
      updateSelectInput(session, "case",
        choices = c("All", unique(as.character(data_01$case))),
        selected="All")
    } else {
      updateSelectInput(session, "case",
        choices = c("All", unique(
          as.character(subset(data_01, subspecialty == x, case, TRUE)))),
        selected = "All")
    }
  })

# Emit the download count
renderValueBox({

    # data <- data_0

    # if (input$resident != "All") {
    #   data <- data[data$resident == input$resident,]
    # }
    # if (input$subspecialty != "All") {
    #   data <- data[data$subspecialty == input$subspecialty,]
    # }
    # if (input$case != "All") {
    #   data <- data[data$case == input$case,]
    # }

  # data<-subset(data_0,data_0$resident == input$resident &
  #                 data_0$subspecialty == input$subspecialty &
  #                 data_0$case == input$case)

# test<-data()$q6_zones_use


resident<-reactive({input$resident})
subspecialty<-reactive({input$subspecialty})
case<-reactive({input$case})

data<-subset(data_0,data_0$resident == resident() &
                  data_0$subspecialty == subspecialty() &
                  data_0$case == case())

dlCount <- round(prop.table(table(data$q6_zones_use))[3]*100)

  valueBox(value=dlCount,
           icon = "fa-download",
           color = if (dlCount <= 50) "warning" else "primary")
})
```

### Total # of cases {.value-box}
  
```{r}
# downloadRate is a reactive expression that computes the download
# rate during this dashboard's lifetime.
# startTime <- as.numeric(Sys.time())
# downloadRate <- reactive({
#   elapsed <- as.numeric(Sys.time()) - startTime
#   nrow(pkgData()) / min(maxAgeSecs, elapsed)
# })

# Emit the download rate
renderValueBox({

    # data <- data_0
    # if (input$resident != "All") {
    #   data <- data[data$resident == input$resident,]
    # }
    # if (input$subspecialty != "All") {
    #   data <- data[data$subspecialty == input$subspecialty,]
    # }
    # if (input$case != "All") {
    #   data <- data[data$case == input$case,]
    # }

resident<-reactive({input$resident})
subspecialty<-reactive({input$subspecialty})
case<-reactive({input$case})

data<-subset(data_0,data_0$resident == resident() &
                  data_0$subspecialty == subspecialty() &
                  data_0$case == case())


#count number of lines
  value<-length(data$case)

  valueBox(
    value = value,
    icon = "fa-area-chart"
    # color = if (rate >= input$rateThreshold) "warning" else "primary"
  )
})
```

### **ZPD 1** - *Highest level on case* {.value-box}

```{r}
# usrCount is a reactive expression that keeps an approximate
# count of all of the unique users that have been seen since the
# app started.

# Emit the user count
renderValueBox({

    # data <- data_0
    # if (input$resident != "All") {
    #   data <- data[data$resident == input$resident,]
    # }
    # if (input$subspecialty != "All") {
    #   data <- data[data$subspecialty == input$subspecialty,]
    # }
    # if (input$case != "All") {
    #   data <- data[data$case == input$case,]
    # }

resident<-reactive({input$resident})
subspecialty<-reactive({input$subspecialty})
case<-reactive({input$case})

data<-subset(data_0,data_0$resident == resident() &
                  data_0$subspecialty == subspecialty() &
                  data_0$case == case())

#recoding ZPDs
# spd_rec<-car::recode(data$zpd,"
#                                     'ZPD1'=1;
#                                     'ZPD2'=2;
#                                     'ZPD3'=3;
#                                     'ZPD4'=4;
#                                     'ZPD 4'=4;
#                                     ''=NA
#                           ")

#getting the highest
highest_zpd <- max(as.numeric(na.omit(as.character(data$aZPD1))))

#recoding back to category
usrCount <- car::recode(highest_zpd,"
                                    1='Show and tell';
                                    2='Active help';
                                    3='Passive help';
                                    4='No help'
                          ")

color <- car::recode(highest_zpd,"
                                    1='red';
                                    2='orange';
                                    3='blue';
                                    4='green'
                          ")

#plot value
valueBox(value = usrCount, 
         icon = "fa-users",
         color = color)
})
```

### **ZPD 2** - *Highest level on case* {.value-box}

```{r}
# usrCount is a reactive expression that keeps an approximate
# count of all of the unique users that have been seen since the
# app started.

# Emit the user count
renderValueBox({

    # data <- data_0
    # if (input$resident != "All") {
    #   data <- data[data$resident == input$resident,]
    # }
    # if (input$subspecialty != "All") {
    #   data <- data[data$subspecialty == input$subspecialty,]
    # }
    # if (input$case != "All") {
    #   data <- data[data$case == input$case,]
    # }

resident<-reactive({input$resident})
subspecialty<-reactive({input$subspecialty})
case<-reactive({input$case})

data<-subset(data_0,data_0$resident == resident() &
                  data_0$subspecialty == subspecialty() &
                  data_0$case == case())

#getting the highest
highest_zpd <- max(as.numeric(na.omit(as.character(data$aZPD2))))

#recoding back to category
usrCount <- car::recode(highest_zpd,"
                                    1='Show and tell';
                                    2='Active help';
                                    3='Passive help';
                                    4='No help'
                          ")

color <- car::recode(highest_zpd,"
                                    1='red';
                                    2='orange';
                                    3='blue';
                                    4='green'
                          ")

#plot value
valueBox(value = usrCount, 
         icon = "fa-users",
         color = color)
})
```

### **ZPD 3** - *Highest level on case* {.value-box}

```{r}
# usrCount is a reactive expression that keeps an approximate
# count of all of the unique users that have been seen since the
# app started.

# Emit the user count
renderValueBox({

    # data <- data_0
    # if (input$resident != "All") {
    #   data <- data[data$resident == input$resident,]
    # }
    # if (input$subspecialty != "All") {
    #   data <- data[data$subspecialty == input$subspecialty,]
    # }
    # if (input$case != "All") {
    #   data <- data[data$case == input$case,]
    # }

resident<-reactive({input$resident})
subspecialty<-reactive({input$subspecialty})
case<-reactive({input$case})

data<-subset(data_0,data_0$resident == resident() &
                  data_0$subspecialty == subspecialty() &
                  data_0$case == case())

#getting the highest
highest_zpd <- max(as.numeric(na.omit(as.character(data$aZPD3))))

#recoding back to category
usrCount <- car::recode(highest_zpd,"
                                    1='Show and tell';
                                    2='Active help';
                                    3='Passive help';
                                    4='No help'
                          ")

color <- car::recode(highest_zpd,"
                                    1='red';
                                    2='orange';
                                    3='blue';
                                    4='green'
                          ")

#plot value
valueBox(value = usrCount, 
         icon = "fa-users",
         color = color)
})
```

### **ZPD 4** - *Highest level on case* {.value-box}

```{r}
# usrCount is a reactive expression that keeps an approximate
# count of all of the unique users that have been seen since the
# app started.

# Emit the user count
renderValueBox({

    # data <- data_0
    # if (input$resident != "All") {
    #   data <- data[data$resident == input$resident,]
    # }
    # if (input$subspecialty != "All") {
    #   data <- data[data$subspecialty == input$subspecialty,]
    # }
    # if (input$case != "All") {
    #   data <- data[data$case == input$case,]
    # }

resident<-reactive({input$resident})
subspecialty<-reactive({input$subspecialty})
case<-reactive({input$case})

data<-subset(data_0,data_0$resident == resident() &
                  data_0$subspecialty == subspecialty() &
                  data_0$case == case())

#getting the highest
highest_zpd <- max(as.numeric(na.omit(as.character(data$aZPD4))))

#recoding back to category
usrCount <- car::recode(highest_zpd,"
                                    1='Show and tell';
                                    2='Active help';
                                    3='Passive help';
                                    4='No help'
                          ")

color <- car::recode(highest_zpd,"
                                    1='red';
                                    2='orange';
                                    3='blue';
                                    4='green'
                          ")

#plot value
valueBox(value = usrCount, 
         icon = "fa-users",
         color = color)
})
```

Column
-----------------------------------------------------------


### ZPD evolving overtime

```{r}
# <!-- {data-height=1550} -->
# data <- data_0

# selectedData <- reactive({
#   if (input$resident != "All") {
#       data <- data[data$resident == input$resident,]
#     }
#     if (input$subspecialty != "All") {
#       data <- data[data$subspecialty == input$subspecialty,]
#     }
#     if (input$case != "All") {
#       data <- data[data$case == input$case,]
#     }
# })

# data %>% 
#   group_by(case_date1,zpd) %>%
#   summarise(no_rows = length(case)) %>%
#   na.omit() %>%
#   spread(zpd,no_rows) -> data2

# data2<-as.data.frame(data2)

# NAto0<-function(x){
#   car::recode(x,"NA=0")
#   }

# temp<-lapply(data2[,-1],NAto0)

# data2$Total<-rowSums(as.data.frame(temp))

# data3 <- xts(data2[,-1], order.by=as.Date(data2[,1]), "%m/%d/%Y")

# dygraph(data3, main = "") %>% 
#   dyRangeSelector(dateWindow = c(min(data2$case_date1), 
#                    max(data2$case_date1)))
 
resident<-reactive({input$resident})
subspecialty<-reactive({input$subspecialty})
case<-reactive({input$case})

renderPlotly({

  data_0$aZPD1<-car::recode(data_0$aZPD1,"1='show_tell';
                                        2='active_help';
                                        3='passive_help';
                                        4='no_help'")


data_0$aZPD2<-car::recode(data_0$aZPD2,"1='show_tell';
                                        2='active_help';
                                        3='passive_help';
                                        4='no_help'")

data_0$aZPD3<-car::recode(data_0$aZPD3,"1='show_tell';
                                        2='active_help';
                                        3='passive_help';
                                        4='no_help'")

data_0$aZPD4<-car::recode(data_0$aZPD4,"1='show_tell';
                                        2='active_help';
                                        3='passive_help';
                                        4='no_help'")

data<-subset(data_0,data_0$resident == resident() &
                  data_0$subspecialty == subspecialty() &
                  data_0$case == case())


data_zpd<-with(data,data.frame(aZPD1,aZPD2,aZPD3,aZPD4))

    # pkgData() %>%
    data_zpd %>%
    # tally() %>%
    # arrange(desc(n), tolower(package)) %>%
    gather() %>%
    group_by(key,value) %>%
    count(key,value) %>%
    spread(value,n) -> tryout

tryout<-as.data.frame(tryout)
tryout$key<-as.factor(tryout$key)

if("show_tell" %in% colnames(tryout))
{
  tryout$show_tell<-tryout$show_tell

} else { 

  tryout$show_tell<-c(0,0,0,0)

}

if("active_help" %in% colnames(tryout))
{
  tryout$active_help<-tryout$active_help
  
} else { 

  tryout$active_help<-c(0,0,0,0)

}

if("passive_help" %in% colnames(tryout))
{
  tryout$passive_help<-tryout$passive_help
  
} else { 

  tryout$passive_help<-c(0,0,0,0)

}

if("no_help" %in% colnames(tryout))
{
  tryout$no_help<-tryout$no_help
  
} else { 

  tryout$no_help<-c(0,0,0,0)

}


NAto0<-function(x){
  car::recode(x,"NA=0")
  }

  tryout_NAtozero<-lapply(tryout,NAto0)

tryout_NAtozero<-as.data.frame(tryout_NAtozero)

tryout_NAtozero$key<-recode(tryout_NAtozero$key, 
                    aZPD1="ZPD 1",
                    aZPD2="ZPD 2",
                    aZPD3="ZPD 3",
                    aZPD4="ZPD 4",)

toplot<-plot_ly(tryout_NAtozero,type = "bar", 
          x = ~key, 
          y = ~show_tell,
          text = tryout_NAtozero$show_tell, 
          textposition = 'auto',
          name='Show and Tell',
          marker= list(color='red')) %>%
      add_trace(y = ~active_help, 
                name = 'Active Help',
                text = tryout_NAtozero$active_help, 
                textposition = 'auto',
                marker= list(color='orange')) %>%
      add_trace(y = ~passive_help,
                name = 'Passive Help',
                text = tryout_NAtozero$passive_help, 
                textposition = 'auto',
                marker= list(color='blue')) %>%
      add_trace(y = ~no_help,
                name = 'No Help',
                text = tryout_NAtozero$no_help, 
                textposition = 'auto',
                marker= list(color='green')) %>%
      layout(yaxis = list(title = 'Days'),
           xaxis = list(title = 'Zones of Proximal Development'), 
            barmode = 'stack',
            legend=list(orientation='h',
                x = 200, y = 1.2))
})

```

### Average ZPD level
  
```{r}
renderTable({

    #   data <- data_0
    # if (input$attending != "All") {
    #   data <- data[data$attending == input$attending,]
    # }
    
    # if (all(is.na(data$q7_suggestion_for_improvement))==TRUE) {

    #   "No comments"

    # } else{

resident<-reactive({input$resident})
subspecialty<-reactive({input$subspecialty})
case<-reactive({input$case})

data<-subset(data_0,data_0$resident == resident() &
                  data_0$subspecialty == subspecialty() &
                  data_0$case == case())


data_zpd<-with(data,data.frame(aZPD1,aZPD2,aZPD3,aZPD4))

    # pkgData() %>%
    data_zpd %>%
    # tally() %>%
    # arrange(desc(n), tolower(package)) %>%
    gather() %>%
    group_by(key) %>%
    summarise(mean=mean(na.omit(value)),sd=sd(na.omit(value))) -> group_by_zpd
  # mutate(percentage = n / nrow(pkgData()) * 100) %>%


  group_by_zpd$cat<-car::recode(group_by_zpd$mean,"
    1:1.999='Show/Tell';
    2:2.999='Active Help';
    3:3.999='Passive Help';
    4='No Help'") 

 group_by_zpd$key<-car::recode(group_by_zpd$key,"
      'aZPD1'='ZPD 1';
      'aZPD2'='ZPD 2';
      'aZPD3'='ZPD 3';
      'aZPD4'='ZPD 4'")

 group_by_zpd[,2]<-round(group_by_zpd[,2],2)

colnames(group_by_zpd)<-c("ZPDs","Average score", "Sd Score","Category")

group_by_zpd

group_by_tbl<-group_by_zpd[,-c(2,3)]

group_by_tbl
# 


    # select("Status" = q7_suggestion_for_improvement) %>%
    # as.data.frame() %>%

})
```

<!-- 
### Last performance evaluation {data-width=340}

```{r}
renderTable({

    #   data <- data_0
    # if (input$attending != "All") {
    #   data <- data[data$attending == input$attending,]
    # }
    
    # if (all(is.na(data$q7_suggestion_for_improvement))==TRUE) {

    #   "No comments"

    # } else{

    # pkgData() %>%
    data %>%
    # group_by(attending) %>%
    # tally() %>%
    # arrange(desc(n), tolower(package)) %>%
    arrange(data,case_date1) %>%
    # mutate(percentage = n / nrow(pkgData()) * 100) %>%
    select("Comment" = q7_suggestion_for_improvement) %>%
    as.data.frame() %>%
    head(10)

})

```
 -->
<!-- Functional
=======================================================================

Row
-----------------------------------------------------------------------
  
### Recent Downlads
  
```{r}
renderTable({
  downloads <- tail(pkgData(), n = input$maxrows)
  downloads <- downloads[,c("date", "time", "size", "r_version", 
                            "r_arch", "r_os", "package")]
  downloads[order(nrow(downloads):1),]
})
```

### Performance overtime

```{r}
library(dygraphs)
dygraph(nhtemp, main = "New Haven Temperatures") %>% 
  dyRangeSelector(dateWindow = c("1920-01-01", "1960-01-01"))
```

Row
-----------------------------------------------------------------------

### Comment

***

"Excellent exposure obviously putting on the electrode is not as easy at it looks but you persevered." (Haglund)

"Really nice job, now just user finer points to increase efficiency, this was a routing 3 level but handled everything nice and safely" (Vissoci)

"Doing a nice job on the drilling, more efficient as the day went along, again being careful not to go deep at the lateral margins when drilling and good pick up that our initial pin placement at top was in bad position" (Yoda)


Spine
=======================================================================
  
### Recent Downlads
  
```{r}
renderTable({
  downloads <- tail(pkgData(), n = input$maxrows)
  downloads <- downloads[,c("date", "time", "size", "r_version", 
                            "r_arch", "r_os", "package")]
  downloads[order(nrow(downloads):1),]
})
```

### Performance overtime

```{r}
library(dygraphs)
dygraph(nhtemp, main = "New Haven Temperatures") %>% 
  dyRangeSelector(dateWindow = c("1920-01-01", "1960-01-01"))
```
 -->